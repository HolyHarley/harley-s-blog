---
import Layout from "../layouts/Layout.astro";
import Hero from "../components/Hero.astro";
import PostCard from "../components/PostCard.astro";

import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
	.sort(
		(a, b) =>
			new Date(b.data.pubDate).valueOf() -
			new Date(a.data.pubDate).valueOf(),
	)
	.slice(0, 3);
---

<Layout title="Welcome to My Blog">
	<Hero />

	<section class="latest-posts">
		<div class="container">
			<h2 class="section-title">最新の投稿</h2>
			<div class="post-list">
				{posts.map((post) => <PostCard post={post} />)}
			</div>
			<div class="view-all">
				<a href="/blog" class="btn btn-secondary">すべての記事を見る</a>
			</div>
		</div>
	</section>
</Layout>

<style>
	.latest-posts {
		padding: 4rem 0;
	}

	.section-title {
		font-size: 2rem;
		margin-bottom: 2rem;
		text-align: center;
	}

	.post-list {
		display: flex;
		flex-direction: column;
		gap: 2rem;
		max-width: 800px;
		margin: 0 auto;
	}

	.view-all {
		text-align: center;
		margin-top: 3rem;
	}

	.btn-secondary {
		background: transparent;
		border: 1px solid var(--color-border);
		color: var(--color-text);
		display: inline-block;
		padding: 0.5rem 1rem;
		border-radius: 0.5rem;
		text-decoration: none;
		transition: all 0.2s ease;
	}

	.btn-secondary:hover {
		background: var(--color-surface);
		border-color: var(--color-text);
	}
</style>
