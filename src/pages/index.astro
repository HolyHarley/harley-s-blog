---
import Layout from "../layouts/Layout.astro";

const posts = (await Astro.glob("./blog/*.{md,mdx}"))
	.sort(
		(a, b) =>
			new Date(b.frontmatter.pubDate).valueOf() -
			new Date(a.frontmatter.pubDate).valueOf(),
	)
	.slice(0, 3);
---

<Layout title="Welcome to My Blog">
	<section class="hero">
		<div class="container hero-inner">
			<h1 class="animate-fade-in">
				Dev <span class="text-gradient">Blog</span>
			</h1>
			<p class="hero-text animate-fade-in" style="animation-delay: 0.1s;">
				Astro, Bun, Hono でつくる未来。
			</p>
			<div
				class="hero-actions animate-fade-in"
				style="animation-delay: 0.2s;"
			>
				<a href="/blog" class="btn">記事を読む</a>
				<a
					href="https://github.com"
					target="_blank"
					class="btn btn-secondary">GitHub</a
				>
			</div>
		</div>
	</section>

	<section class="latest-posts">
		<div class="container">
			<h2 class="section-title">最新の投稿</h2>
			<div class="post-list">
				{
					posts.map((post) => (
						<article class="post-card">
							<a href={post.url} class="post-link">
								<div class="post-image">
									{post.frontmatter.heroImage && (
										<img
											src={post.frontmatter.heroImage}
											alt={post.frontmatter.title}
										/>
									)}
								</div>
								<div class="post-content">
									<h3 class="post-title">
										{post.frontmatter.title}
									</h3>
									<div class="post-meta">
										<time
											datetime={post.frontmatter.pubDate}
										>
											{new Date(
												post.frontmatter.pubDate,
											).toLocaleDateString("ja-JP")}
										</time>
									</div>
									<p class="post-description">
										{post.frontmatter.description}
									</p>
								</div>
							</a>
						</article>
					))
				}
			</div>
			<div class="view-all">
				<a href="/blog" class="btn btn-secondary">すべての記事を見る</a>
			</div>
		</div>
	</section>
</Layout>

<style>
	.hero {
		padding: 6rem 0;
		text-align: center;
		background: radial-gradient(
			circle at center,
			rgba(99, 102, 241, 0.15) 0%,
			transparent 70%
		);
	}

	h1 {
		font-size: 4rem;
		font-weight: 800;
		letter-spacing: -0.02em;
		margin-bottom: 1.5rem;
	}

	.text-gradient {
		background: linear-gradient(
			to right,
			var(--color-primary),
			var(--color-accent)
		);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
	}

	.hero-text {
		font-size: 1.25rem;
		color: var(--color-text-muted);
		max-width: 600px;
		margin: 0 auto 2.5rem;
	}

	.hero-actions {
		display: flex;
		gap: 1rem;
		justify-content: center;
	}

	.btn-secondary {
		background: transparent;
		border: 1px solid var(--color-border);
		color: var(--color-text);
	}

	.btn-secondary:hover {
		background: var(--color-surface);
		border-color: var(--color-text);
	}

	.latest-posts {
		padding: 4rem 0;
	}

	.section-title {
		font-size: 2rem;
		margin-bottom: 2rem;
		text-align: center;
	}

	.post-list {
		display: flex;
		flex-direction: column;
		gap: 2rem;
		max-width: 800px;
		margin: 0 auto;
	}

	.post-card {
		background: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: var(--radius-lg);
		overflow: hidden;
		transition: var(--transition-base);
	}

	.post-card:hover {
		transform: translateY(-4px);
		border-color: var(--color-primary);
		box-shadow: var(--shadow-lg);
	}

	.post-link {
		display: flex;
		text-decoration: none;
		color: inherit;
		align-items: stretch;
	}

	.post-image {
		flex: 0 0 280px;
		overflow: hidden;
	}

	.post-image img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: transform 0.3s ease;
	}

	.post-card:hover .post-image img {
		transform: scale(1.05);
	}

	.post-content {
		flex: 1;
		padding: 1.5rem;
		display: flex;
		flex-direction: column;
		justify-content: center;
	}

	.post-title {
		font-size: 1.5rem;
		margin-bottom: 0.5rem;
		color: var(--color-text);
		line-height: 1.3;
	}

	.post-card:hover .post-title {
		color: var(--color-primary);
	}

	.post-meta {
		font-size: 0.875rem;
		color: var(--color-text-muted);
		margin-bottom: 0.75rem;
	}

	.post-description {
		color: var(--color-text-muted);
		line-height: 1.6;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	.view-all {
		text-align: center;
		margin-top: 3rem;
	}

	@media (max-width: 768px) {
		.post-link {
			flex-direction: column;
		}

		.post-image {
			flex: 0 0 200px;
		}
	}
</style>
